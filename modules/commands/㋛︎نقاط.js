module.exports.config = {
  name: "Ù†Ù‚Ø§Ø·",
  version: "2.0.0",
  hasPermssion: 2,
  credits: "Ayman",
  description: "Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠ ÙÙŠ Ù…Ø³ØªÙˆÙŠØ§Øª ÙˆÙ†Ù‚Ø§Ø· Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡",
  commandCategory: "Ø§Ù„Ù…Ø·ÙˆØ±",
  usages: "[Ø¨Ø§Ù„Ø±Ø¯ / Ø¨Ø§Ù„ØªØ§Øº / UID / Ø±ÙØ¹ / del]",
  cooldowns: 2
};

module.exports.run = async function({ api, event, args, Currencies, Users }) {
    const { threadID, messageID, senderID, mentions, type, messageReply } = event;
    const out = (msg) => api.sendMessage(msg, threadID, messageID);

    // ğŸ‘‘ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„Ø³ÙŠØ§Ø¯ÙŠØ© (Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ± Ø£ÙŠÙ…Ù†)
    const EMPEROR_ID = "61577861540407";
    if (senderID !== EMPEROR_ID) return out("â—ˆ â”€â”€â”€ã€ ØªÙ€Ù†Ù€Ø¨Ù€ÙŠÙ€Ù‡ Ù…Ù€Ù„Ù€ÙƒÙ€ÙŠ ã€â”€â”€â”€ â—ˆ\n\nâ—¯ Ø³ÙŠØ¯ÙŠØŒ Ù‡Ø°Ø§ Ø§Ù„Ø£Ù…Ø± Ø®Ø§Øµ Ø¨Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ± Ø£ÙŠÙ…Ù† ÙÙ‚Ø·!\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\nâ—ˆ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â—ˆ");

    // 1ï¸âƒ£ Ù…ÙŠØ²Ø© Ø§Ù„Ø±Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø±Ø³Ø§Ù„Ø© (Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹)
    if (type == "message_reply") {
        const targetID = messageReply.senderID;
        const expSet = parseInt(args[0]);
        if (isNaN(expSet)) return out("âš ï¸ Ø³ÙŠØ¯ÙŠØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø±Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø±Ø³Ø§Ù„Ø© ÙˆÙƒØªØ§Ø¨Ø© Ø¹Ø¯Ø¯ Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø¬Ø¯ÙŠØ¯.");
        
        await Currencies.setData(targetID, { exp: expSet });
        const name = (await Users.getData(targetID)).name;
        return out(`â—ˆ â”€â”€â”€ã€ ØªÙ€Ø¹Ø¯ÙŠÙ€Ù„ Ø§Ù„Ù€Ù†Ù‚Ø§Ø· ã€â”€â”€â”€ â—ˆ\n\nâ—¯ Ø§Ù„Ù€Ù…Ø³ØªÙ€ÙÙŠØ¯: ${name}\nâ—‰ Ø§Ù„Ù€Ù†Ù‚Ø§Ø· Ø§Ù„Ù€Ø¬Ø¯ÙŠØ¯Ø©: ${expSet} Ø±Ø³Ø§Ù„Ø©\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\nâ—ˆ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â—ˆ`);
    }

    // 2ï¸âƒ£ Ù…ÙŠØ²Ø© Ø§Ù„Ø±ÙØ¹ Ø§Ù„Ø´Ø®ØµÙŠ
    if (args[0] == 'Ø±ÙØ¹') {
        const expSet = parseInt(args[1]);
        if (isNaN(expSet)) return out("âš ï¸ Ø³ÙŠØ¯ÙŠØŒ Ø­Ø¯Ø¯ Ø¹Ø¯Ø¯ Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø°ÙŠ ØªØ±ØºØ¨ Ø¨Ø±ÙØ¹Ù‡ Ù„Ù†ÙØ³Ùƒ.");
        await Currencies.setData(senderID, { exp: expSet });
        return out(`â—ˆ â”€â”€â”€ã€ ØªÙ€Ø¹Ù€Ø²ÙŠÙ€Ø² Ø°Ø§ØªÙ€ÙŠ ã€â”€â”€â”€ â—ˆ\n\nâ—¯ ØªÙ€Ù… ØªÙ€ØºÙŠÙŠØ± Ù†Ù€Ù‚Ø§Ø·Ùƒ Ø¥Ù„Ù€Ù‰: ${expSet}\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\nâ—ˆ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â—ˆ`);
    }

    // 3ï¸âƒ£ Ù…ÙŠØ²Ø© Ø§Ù„Ø­Ø°Ù ÙˆØ§Ù„ØªØµÙÙŠØ± (del)
    if (args[0] == "del") {
        let targetID, name;
        if (args[1] == 'Ù†Ù‚Ø§Ø·ÙŠ') {
            targetID = senderID;
            name = "Ø®Ø²Ù†ØªÙƒ";
        } else if (Object.keys(mentions).length > 0) {
            targetID = Object.keys(mentions)[0];
            name = mentions[targetID].replace("@", "");
        } else {
            return out("âš ï¸ Ø§Ø³ØªØ®Ø¯Ù…: Ù†Ù‚Ø§Ø· del [Ù†Ù‚Ø§Ø·ÙŠ / ØªØ§Øº]");
        }

        await Currencies.setData(targetID, { exp: 0 });
        return out(`â—ˆ â”€â”€â”€ã€ ØªÙ€ØµÙ€ÙÙ€ÙŠÙ€Ø± Ø§Ù„Ù€Ù†Ù‚Ø§Ø· ã€â”€â”€â”€ â—ˆ\n\nâ—¯ ØªÙ€Ù… Ø­Ù€Ø°Ù Ø¬Ù€Ù…ÙŠØ¹ Ù†Ù€Ù‚Ø§Ø·: ${name}\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\nâ—ˆ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â—ˆ`);
    }

    // 4ï¸âƒ£ Ù…ÙŠØ²Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø¹Ø¨Ø± Ø§Ù„ØªØ§Øº (@Mention)
    if (Object.keys(mentions).length > 0) {
        const targetID = Object.keys(mentions)[0];
        const expSet = parseInt(args[args.length - 1]);
        if (isNaN(expSet)) return out("âš ï¸ Ø³ÙŠØ¯ÙŠØŒ ÙŠØ±Ø¬Ù‰ ÙˆØ¶Ø¹ Ø¹Ø¯Ø¯ Ø§Ù„Ù†Ù‚Ø§Ø· Ø¨Ø¹Ø¯ Ø§Ù„ØªØ§Øº.");

        await Currencies.setData(targetID, { exp: expSet });
        return out(`â—ˆ â”€â”€â”€ã€ ØªÙ€Ø¹Ø¯ÙŠÙ€Ù„ Ø§Ù„Ù€Ù†Ù‚Ø§Ø· ã€â”€â”€â”€ â—ˆ\n\nâ—¯ Ø§Ù„Ù€Ø¹Ø¶Ùˆ: ${mentions[targetID].replace("@", "")}\nâ—‰ Ø§Ù„Ù€Ù†Ù‚Ø§Ø·: ${expSet} Ø±Ø³Ø§Ù„Ø©\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\nâ—ˆ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â—ˆ`);
    }

    // 5ï¸âƒ£ Ù…ÙŠØ²Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø¹Ø¨Ø± Ø§Ù„Ø§ÙŠØ¯ÙŠ (UID)
    if (args[0] == "UID") {
        const targetID = args[1];
        const expSet = parseInt(args[2]);
        if (!targetID || isNaN(expSet)) return out("âš ï¸ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…: Ù†Ù‚Ø§Ø· UID [Ø§Ù„Ø§ÙŠØ¯ÙŠ] [Ø§Ù„Ù†Ù‚Ø§Ø·]");

        try {
            const userName = (await Users.getData(targetID)).name;
            await Currencies.setData(targetID, { exp: expSet });
            return out(`â—ˆ â”€â”€â”€ã€ ØªÙ€Ø¹Ø¯ÙŠÙ€Ù„ Ø§Ù„Ù€Ù†Ù‚Ø§Ø· ã€â”€â”€â”€ â—ˆ\n\nâ—¯ Ø§Ù„Ù€Ø­Ø³Ø§Ø¨: ${userName}\nâ—‰ Ø§Ù„Ù€Ù†Ù‚Ø§Ø·: ${expSet}\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\nâ—ˆ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â—ˆ`);
        } catch (e) {
            return out("âš ï¸ ÙØ´Ù„ Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø§ÙŠØ¯ÙŠ Ø³ÙŠØ¯ÙŠ.");
        }
    }

    // ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© ÙÙŠ Ø­Ø§Ù„ Ø¹Ø¯Ù… Ø¥Ø¯Ø®Ø§Ù„ Ø£ÙˆØ§Ù…Ø± ØµØ­ÙŠØ­Ø©
    return out(`â—ˆ â”€â”€â”€ã€ ØªÙ€Ø­Ù€ÙƒÙ€Ù… Ø§Ù„Ù€Ù…Ù€Ø³Ù€ØªÙ€ÙˆÙ‰ ã€â”€â”€â”€ â—ˆ\n\nâ—¯ Ø®Ù€ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø¥Ù…Ù€Ø¨Ù€Ø±Ø§Ø·Ù€ÙˆØ± :\nâ—‰ Ø±Ø¯ + Ø¹Ø¯Ø¯ (Ù„Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹)\nâ—‰ Ù†Ù‚Ø§Ø· Ø±ÙØ¹ [Ø¹Ø¯Ø¯] (Ù„Ù†ÙØ³Ùƒ)\nâ—‰ Ù†Ù‚Ø§Ø· [ØªØ§Øº] [Ø¹Ø¯Ø¯]\nâ—‰ Ù†Ù‚Ø§Ø· UID [Ø§Ù„Ø§ÙŠØ¯ÙŠ] [Ø¹Ø¯Ø¯]\nâ—‰ Ù†Ù‚Ø§Ø· del [Ù†Ù‚Ø§Ø·ÙŠ/ØªØ§Øº] (Ù„Ù„Ø­Ø°Ù)\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\nâ—ˆ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â—ˆ\nâ”‚â†â€º Ø¨Ù€Ø¥Ø¯Ø§Ø±Ø©: Ø£ÙŠÙ€Ù…Ù€Ù† Ø§Ù„Ù€ØªÙ€ÙˆØ¨`);
};
