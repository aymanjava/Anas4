module.exports.config = {
  name: "Ù†ÙƒØªÙ‡",
  version: "2.0.0",
  hasPermssion: 0,
  credits: "Ayman",
  description: "ÙŠØ±Ø³Ù„ Ù„Ùƒ Ù†ÙƒØªØ© Ù…Ø¶Ø­ÙƒØ© Ù…Ø¹ ØµÙˆØ±Ø© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© ğŸ¤£",
  commandCategory: "ØªØ±ÙÙŠÙ‡",
  usages: "",
  cooldowns: 2
};

module.exports.run = async function({ api, event }) {
    const axios = require("axios");
    const fs = require("fs-extra");
    const { threadID, messageID } = event;

    // Ø±ÙˆØ§Ø¨Ø· ØµÙˆØ± Ù…Ø¶Ø­ÙƒØ© (Ù…ÙŠÙ…Ø²)
    const links = [
        "https://i.imgur.com/SmrAxPV.jpg",
        "https://i.imgur.com/WNXgwgX.jpg", 
        "https://i.imgur.com/ILucq55.jpg", 
        "https://i.imgur.com/CF8qAAo.jpg", 
        "https://i.imgur.com/gqukE0K.jpg"
    ];

    // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù†ÙƒØª Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©
    const jokes = [
        `ÙˆØ§Ø­Ø¯ ÙˆØ²ÙˆØ¬ØªÙ‡ Ù…ØªØ®Ø§Ù†Ù‚ÙŠÙ† ØªØ±Ùƒ Ù„Ù‡Ø§ ÙˆØ±Ù‚Ø© "ØµØ­ÙŠÙ†ÙŠ Ø§Ù„Ø³Ø§Ø¹Ø© 6 ÙˆÙ†ØµÙ"ØŒ ØµØ­ÙŠ Ø§Ù„Ø³Ø§Ø¹Ø© 10 Ù„Ù‚Ù‰ ÙˆØ±Ù‚Ø© Ù…ÙƒØªÙˆØ¨ ÙÙŠÙ‡Ø§ "Ø§Ù„Ø³Ø§Ø¹Ø© 6 ÙˆÙ†Øµ ÙŠÙ„Ø§ Ø¥ØµØ­Ù‰" ğŸ˜‚`,
        `Ù…Ø­Ø´Ø´ ÙˆÙ…Ø±ØªÙˆ Ù‚Ø§Ø¹Ø¯ÙŠÙ†ØŒ Ù‚Ø§Ù„Øª Ù„Ù‡: Ù†ÙØ³ÙŠ Ø£Ø¹Ø±Ù Ù„ÙŠØ´ Ø§Ù„Ù†Ø§Ø³ Ø¨ØªÙ†ÙƒØª Ø¹Ù„ÙŠÙ†Ø§ØŸ Ù‚Ø§Ù„ Ù„Ù‡Ø§: Ù„Ø£Ù† Ø¬Ø¨Ù‡ØªÙ†Ø§ Ù…Ø«Ù„ Ù‡Ø°Ù‡ Ø§Ù„Ø·Ø§ÙˆÙ„Ø©ØŒ ÙˆØ¶Ø±Ø¨ Ø¹Ù„Ù‰ Ø§Ù„Ø·Ø§ÙˆÙ„Ø©ØŒ Ù‚Ø§Ù„Øª Ù„Ù‡: Ù…ÙŠÙ†ØŸ Ù‚Ø§Ù„ Ù„Ù‡Ø§: Ø®Ù„ÙŠÙƒÙŠ Ø£Ù†Ø§ Ø¨ÙØªØ­ Ø§Ù„Ø¨Ø§Ø¨! ğŸ¤¦â€â™‚ï¸`,
        `Ø­Ø±Ø§Ù…ÙŠ Ø¯Ø®Ù„ ÙŠØ³Ø±Ù‚ Ø¨ÙŠØª ÙˆØ¬Ø¯ Ø§Ù„Ø¹Ø¬ÙˆØ² Ø¨Ø±Ø¯Ø§Ù†Ø©ØŒ Ø´ØºÙ„ Ø¹Ù„ÙŠÙ‡Ø§ Ø§Ù„Ù…ÙƒÙŠÙ ÙˆÙ‡Ø±Ø¨ â„ï¸ğŸ˜‚`,
        `ÙˆØ§Ø­Ø¯ Ø®Ø¨Ø·ØªÙ‡ Ø³ÙŠØ§Ø±Ø© Ø£Ø®Ø° ØªØ¹ÙˆÙŠØ¶ 70 Ø£Ù„ÙØŒ Ø±Ø§Ø­ ÙˆÙ‚Ù Ù‚Ø¯Ø§Ù… Ø§Ù„Ù‚Ø·Ø§Ø± ÙˆÙ‚Ø§Ù„Ù‡: Ø®Ø´ Ø¹Ù„ÙŠØ§ ÙŠØ§ Ø£Ø¨Ùˆ Ø§Ù„Ù…Ù„Ø§ÙŠÙŠÙ†! ğŸ¤‘`,
        `Ø®Ø±ÙˆÙ Ø¨ÙŠØ³Ø£Ù„ Ø®Ø±ÙˆÙ: Ù…Ø± Ø¹ÙŠØ¯ÙŠÙ† ÙˆÙ…Ø§ Ø°Ø¨Ø­ÙˆÙƒØŸ Ù‚Ø§Ù„Ù‡: Ù…Ø³Ø¬Ù„ Ø¨Ø´Ù‡Ø§Ø¯Ø© Ù…ÙŠÙ„Ø§Ø¯ÙŠ Ø­Ù…Ø§Ø± ğŸ´ğŸ˜‚`,
        `Ù…Ø­Ø´Ø´ ØºÙ…Ø² Ø²ÙˆØ¬ØªÙ‡ ÙˆÙ‚Ø§Ù„ Ù„Ù‡Ø§: Ø§Ø·Ù„Ø¨ÙŠ Ù…Ù† Ø§Ù„Ø¹ÙŠØ§Ù„ ÙŠÙ†Ø§Ù…ÙˆØ§ØŒ ØµØ±Ø®Øª Ø§Ù„Ø²ÙˆØ¬Ø©: Ø§Ù„Ù„ÙŠ ÙŠÙ†Ø§Ù… Ù‡ÙŠØ§Ø®Ø¯ 100 Ø±ÙŠØ§Ù„ØŒ Ù‚Ø§Ù… Ù†Ø§Ù… Ø²ÙˆØ¬Ù‡Ø§ Ø£ÙˆÙ„ ÙˆØ§Ø­Ø¯! ğŸ’µğŸ¤£`,
        `ÙˆØ§Ø­Ø¯ Ø¨Ø®ÙŠÙ„ Ø±Ø§Ø­ ÙŠØ²ÙˆØ± Ø£Ù…Ù‡ Ù„Ù‚Ù‰ Ù…ÙƒØªÙˆØ¨ Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ø§Ø¨ "Ø§Ø¯ÙØ¹"ØŒ Ø±Ø¬Ø¹ ÙˆÙ‚Ø§Ù„: Ø£Ø¨Ù‚Ù‰ Ø£Ø²ÙˆØ±Ù‡Ø§ Ù„Ù…Ø§ ØªÙØªØ­ Ù…Ø¬Ø§Ù†ÙŠ! ğŸ¤¡`,
        `Ø§Ù„Ø£Ø¨: ØªØ­Ø¨ÙˆÙ†ÙŠ ÙˆÙ„Ø§ ØªØ­Ø¨ÙˆÙ† Ø£Ù…ÙƒÙ… Ø£ÙƒØ«Ø±ØŸ Ø§Ù„Ø£ÙˆÙ„Ø§Ø¯: Ù†Ø­Ø¨ÙƒÙ… ÙƒÙ„ÙƒÙ…. Ø§Ù„Ø£Ø¨: Ø·ÙŠØ¨ Ù„Ùˆ Ø£Ù†Ø§ Ø±Ø­Øª Ø¨Ø§Ø±ÙŠØ³ ÙˆØ£Ù…ÙƒÙ… Ø±Ø§Ø­Øª Ù…ÙƒØ© ÙÙŠÙ† ØªØ±ÙˆØ­ÙˆØ§ØŸ Ø§Ù„Ø£ÙˆÙ„Ø§Ø¯: Ù†Ø±ÙˆØ­ Ù…ÙƒØ©. Ø§Ù„Ø£Ø¨: ÙŠØ¹Ù†ÙŠ ØªØ­Ø¨ÙˆØ§ Ø£Ù…ÙƒÙ… Ø£ÙƒØ«Ø±ØŸ Ø§Ù„Ø£ÙˆÙ„Ø§Ø¯: Ù„Ø§ Ø¨Ø³ Ù†Ø­Ø¨ Ù…ÙƒØ©! Ø§Ù„Ø£Ø¨: Ø·ÙŠØ¨ Ù„Ùˆ Ø£Ù†Ø§ Ø±Ø­Øª Ù…ÙƒØ© ÙˆØ£Ù…ÙƒÙ… Ø±Ø§Ø­Øª Ø¨Ø§Ø±ÙŠØ³ØŸ Ø§Ù„Ø£ÙˆÙ„Ø§Ø¯: Ù†Ø±ÙˆØ­ Ø¨Ø§Ø±ÙŠØ³.. Ø§Ù„Ø£Ø¨: Ù„ÙŠÙ‡ØŸ Ø§Ù„Ø£ÙˆÙ„Ø§Ø¯: Ù„Ø£Ù†Ù†Ø§ Ø®Ù„Ø§Øµ Ø±Ø­Ù†Ø§ Ù…ÙƒØ©! ğŸ•‹ğŸ˜‚`
    ];

    const randomJoke = jokes[Math.floor(Math.random() * jokes.length)];
    const randomImg = links[Math.floor(Math.random() * links.length)];
    const pathImg = __dirname + "/cache/joke.jpg";

    api.setMessageReaction("ğŸ¤£", messageID, () => {}, true);

    try {
        const response = await axios.get(randomImg, { responseType: "arraybuffer" });
        fs.writeFileSync(pathImg, Buffer.from(response.data, "utf-8"));

        const msg = `â—ˆ â”€â”€â”€ã€ Ù†Ù€ÙƒÙ€ØªÙ€Ø© Ø§Ù„Ù€ÙŠÙ€ÙˆÙ… ğŸ¤£ ã€â”€â”€â”€ â—ˆ\n\n` +
                    `${randomJoke}\n\n` +
                    `â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\n` +
                    `â”‚â†â€º Ø¨Ù€Ø£ÙˆØ§Ù…Ù€Ø±: Ø§Ù„Ù€ØªÙ€ÙˆØ¨ Ø£ÙŠÙ€Ù…Ù€Ù† ğŸ‘‘`;

        return api.sendMessage({
            body: msg,
            attachment: fs.createReadStream(pathImg)
        }, threadID, () => {
            if (fs.existsSync(pathImg)) fs.unlinkSync(pathImg);
        }, messageID);

    } catch (err) {
        return api.sendMessage(`ğŸ¤£ | ${randomJoke}`, threadID, messageID);
    }
};
